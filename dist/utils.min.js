export function debounce(t,e){let r=null;return(...a)=>{r&&clearTimeout(r),r=setTimeout(()=>t(...a),e)}}export function throttle(t,e){let r=!1;return(...a)=>{r||(t(...a),r=!0,setTimeout(()=>r=!1,e))}}export class SafeStorage{static get(t,e){try{const r=localStorage.getItem(t);return r?JSON.parse(r):e}catch(r){return console.error(`Error reading from localStorage (${t}):`,r),e}}static set(t,e){try{return localStorage.setItem(t,JSON.stringify(e)),!0}catch(e){return console.error(`Error writing to localStorage (${t}):`,e),!1}}static remove(t){try{return localStorage.removeItem(t),!0}catch(e){return console.error(`Error removing from localStorage (${t}):`,e),!1}}static clear(){try{return localStorage.clear(),!0}catch(t){return console.error("Error clearing localStorage:",t),!1}}}export class DOMUtils{static getElementById(t){return document.getElementById(t)}static querySelector(t){return document.querySelector(t)}static querySelectorAll(t){return document.querySelectorAll(t)}static createElement(t,e){const r=document.createElement(t);return e&&(r.className=e),r}static addEventListeners(t,e,r){Array.from(t).forEach(t=>{t.addEventListener(e,e=>r(e,t))})}static removeEventListeners(t,e,r){Array.from(t).forEach(t=>{t.removeEventListener(e,r)})}static toggleClass(t,e,r){t.classList.toggle(e,r)}static addClass(t,...e){t.classList.add(...e)}static removeClass(t,...e){t.classList.remove(...e)}static hasClass(t,e){return t.classList.contains(e)}}export class AnimationUtils{static smoothScrollTo(t){window.scrollTo(t)}static fadeIn(t,e=300){return new Promise(r=>{t.style.opacity="0",t.style.display="block";const a=performance.now(),o=s=>{const n=s-a,i=Math.min(n/e,1);t.style.opacity=i.toString(),i<1?requestAnimationFrame(o):r()};requestAnimationFrame(o)})}static fadeOut(t,e=300){return new Promise(r=>{const a=performance.now(),o=parseFloat(getComputedStyle(t).opacity),s=n=>{const i=n-a,l=Math.min(i/e,1);t.style.opacity=(o*(1-l)).toString(),l<1?requestAnimationFrame(s):(t.style.display="none",r())};requestAnimationFrame(s)})}static animateNumber(t,e,r=1e3){const a=parseInt(t.textContent||"0"),o=e-a,s=performance.now(),n=e=>{const i=e-s,l=Math.min(i/r,1),c=1-Math.pow(1-l,3),m=Math.round(a+o*c);t.textContent=m.toString(),l<1&&requestAnimationFrame(n)};requestAnimationFrame(n)}static slideUp(t,e=300){return new Promise(r=>{t.offsetHeight;t.style.overflow="hidden",t.style.transition=`height ${e}ms ease`,t.style.height="0px",setTimeout(()=>{t.style.display="none",t.style.height="",t.style.overflow="",t.style.transition="",r()},e)})}static slideDown(t,e=300){return new Promise(r=>{t.style.display="block";const a=t.scrollHeight;t.style.height="0px",t.style.overflow="hidden",t.style.transition=`height ${e}ms ease`,requestAnimationFrame(()=>{t.style.height=`${a}px`}),setTimeout(()=>{t.style.height="",t.style.overflow="",t.style.transition="",r()},e)})}}export class ImageUtils{static loadImage(t){return new Promise((e,r)=>{const a=new Image;a.onload=()=>e(a),a.onerror=r,a.src=t})}static getImageDimensions(t){return this.loadImage(t).then(t=>({width:t.naturalWidth,height:t.naturalHeight}))}static resizeImage(t,e,r,a=.8){return new Promise((o,s)=>{const n=document.createElement("canvas"),i=n.getContext("2d");if(!i)return void s(new Error("Canvas context not available"));const l=new Image;l.onload=()=>{const{width:t,height:s}=l,c=Math.min(e/t,r/s);n.width=t*c,n.height=s*c,i.drawImage(l,0,0,n.width,n.height),o(n.toDataURL("image/jpeg",a))},l.onerror=s,l.src=URL.createObjectURL(t)})}static createPlaceholder(t,e,r){return`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${e}' viewBox='0 0 ${t} ${e}'%3E%3Crect width='${t}' height='${e}' fill='%23e0e0e0'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' fill='%23666' font-family='Arial' font-size='16'%3E${encodeURIComponent(r)}%3C/text%3E%3C/svg%3E`}static async createThumbnail(t,e,r){return new Promise((a,o)=>{const s=document.createElement("canvas"),n=s.getContext("2d"),i=new Image;n?(s.width=e,s.height=r,i.onload=()=>{const t=i.width/i.height,o=e/r;let l=i.width,c=i.height,m=0,g=0;t>o?(l=i.height*o,m=(i.width-l)/2):(c=i.width/o,g=(i.height-c)/2),n.drawImage(i,m,g,l,c,0,0,e,r),a(s.toDataURL("image/jpeg",.8))},i.onerror=()=>o(new Error("Failed to load image")),i.src=t):o(new Error("Canvas context not available"))})}static async fileToDataURL(t){return new Promise((e,r)=>{const a=new FileReader;a.onload=t=>{t.target?.result?e(t.target.result):r(new Error("Failed to read file"))},a.onerror=()=>r(new Error("File reading error")),a.readAsDataURL(t)})}}export class ValidationUtils{static isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}static isValidPhone(t){return/^[\+]?[1-9][\d]{0,15}$/.test(t.replace(/\s/g,""))}static isValidPhoneNumber(t){return this.isValidPhone(t)}static isValidURL(t){try{return new URL(t),!0}catch{return!1}}static isValidUrl(t){return this.isValidURL(t)}static isValidImageFile(t){return["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type)}static isValidFileSize(t,e){const r=1024*e*1024;return t.size<=r}}export class PerformanceUtils{static mark(t){this.marks.set(t,performance.now())}static measure(t,e){const r=this.marks.get(e);if(!r)return console.warn(`Start mark '${e}' not found`),0;const a=performance.now()-r;return console.log(`${t}: ${a.toFixed(2)}ms`),a}static async measureAsync(t,e){const r=performance.now(),a=await e(),o=performance.now()-r;return console.log(`${t}: ${o.toFixed(2)}ms`),a}static lazy(t){let e,r=!1;return()=>(r||(e=t(),r=!0),e)}}PerformanceUtils.marks=new Map;export class FormatUtils{static formatPrice(t,e="IDR"){return new Intl.NumberFormat("id-ID",{style:"currency",currency:e,minimumFractionDigits:0}).format(t)}static formatDate(t,e="id-ID"){const r="string"==typeof t?new Date(t):t;return new Intl.DateTimeFormat(e,{year:"numeric",month:"long",day:"numeric"}).format(r)}static formatFileSize(t){if(0===t)return"0 Bytes";const e=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,e)*100)/100+" "+["Bytes","KB","MB","GB"][e]}static truncateText(t,e,r="..."){return t.length<=e?t:t.substring(0,e-r.length)+r}static slugify(t){return t.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}}export class ErrorUtils{static handleError(t,e){const r=e?`${e}: ${t.message}`:t.message;console.error(r,t)}static createError(t,e){const r=new Error(t);return e&&(r.code=e),r}static isNetworkError(t){return t.message.includes("network")||t.message.includes("fetch")||t.message.includes("connection")}}export default{debounce:debounce,throttle:throttle,SafeStorage:SafeStorage,DOMUtils:DOMUtils,AnimationUtils:AnimationUtils,ImageUtils:ImageUtils,ValidationUtils:ValidationUtils,PerformanceUtils:PerformanceUtils,FormatUtils:FormatUtils,ErrorUtils:ErrorUtils};